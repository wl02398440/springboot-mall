<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>綠界金流 - 模擬付款</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        body { background-color: #f0f2f5; display: flex; justify-content: center; align-items: center; height: 100vh; font-family: Arial, sans-serif; }
        .payment-card { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); width: 400px; }
        .header { text-align: center; border-bottom: 1px solid #eee; padding-bottom: 20px; margin-bottom: 20px; }
        .logo { color: #00b900; font-weight: bold; font-size: 24px; } /* 綠界綠 */
        .amount { font-size: 32px; font-weight: bold; color: #333; text-align: center; margin: 10px 0; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; color: #666; font-size: 14px; }
        .form-group input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
        .btn-pay { width: 100%; padding: 12px; background-color: #00b900; color: white; border: none; border-radius: 4px; font-size: 16px; cursor: pointer; transition: 0.3s; }
        .btn-pay:hover { background-color: #009900; }
    </style>
</head>
<body>

<div class="payment-card">
    <div class="header">
        <div class="logo">ECPay <span style="font-size: 14px; color:#666;">(模擬)</span></div>
        <p>訂單編號: <span id="orderIdDisplay">Loading...</span></p>
    </div>

    <div class="amount">NT$ <span id="amountDisplay">0</span></div>

    <div class="form-group">
        <label>信用卡號</label>
        <input type="text" placeholder="4311-9522-2222-2222" value="4311-9522-2222-2222">
    </div>
    <div style="display: flex; gap: 10px;">
        <div class="form-group" style="flex: 1;">
            <label>有效月/年</label>
            <input type="text" placeholder="MM/YY" value="12/30">
        </div>
        <div class="form-group" style="flex: 1;">
            <label>CVC / CVV</label>
            <input type="text" placeholder="123" value="123">
        </div>
    </div>

    <button class="btn-pay" onclick="confirmPayment()">確認付款</button>
</div>

<script>
    // 1. 解析網址上的參數 (oid, total)
    const urlParams = new URLSearchParams(window.location.search);
    const orderId = urlParams.get('oid');
    const total = urlParams.get('total');

    // 2. 顯示在畫面上
    document.getElementById('orderIdDisplay').innerText = orderId;
    document.getElementById('amountDisplay').innerText = total;

    // 3. 按下付款
    function confirmPayment() {
        // 模擬網路延遲
        Swal.fire({
            title: '處理中...',
            text: '正在連線至銀行端',
            didOpen: () => { Swal.showLoading() },
            timer: 1500 // 假裝跑 1.5 秒
        }).then(() => {
            // 4. 呼叫後端 API 更新訂單狀態 (這支 API 我們等等要去寫)
            // 假設您的後端有一支 API 是 PUT /orders/{id}/pay
            // 這裡先用模擬的，實際請改成 fetch

            // fetch(`http://localhost:8080/orders/${orderId}/pay`, { method: 'PUT' }) ...

            Swal.fire({
                icon: 'success',
                title: '付款成功！',
                text: '感謝您的購買',
                confirmButtonText: '回首頁'
            }).then(() => {
                location.href = 'home.html';
            });
        });
    }
</script>

</body>
</html>